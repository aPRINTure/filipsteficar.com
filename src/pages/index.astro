---
// Components
import Layout from "@/layouts/Layout.astro";
import Polaroid from "@/components/Polaroid.astro";
import Hero from "@/components/Hero.astro";
// Data
import { siteData } from "@/data/global";
// Current URL
const currentURL = Astro.url.href;
// PocketBase Interface
import type { PocketBasePhotos } from "@/types/pocketbase";
// Call PocketBase API
const response = await fetch(
    'https://fscms.nova.filipsteficar.com/api/collections/photos/records?filter=(gallery="s55mvh7k6ku1vbq")&perPage=50&sort=order'
);
const data = await response.json();
const photos: PocketBasePhotos[] = data.items;
---
<Layout 
  pageTitle={`${siteData.name} | Home`}
  pageDescription="Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque blanditiis modi architecto ipsum. Distinctio, ipsam quis."
  currentURL={currentURL}
  ogImage="https://images.unsplash.com/photo-1677242178360-6518e2a87194?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
  ogImageAlt="Og Image Description"
  articleAuthor={siteData.author}
>
<section>
    <Hero />
</section>
<section class="columns-1 md:columns-2 lg:columns-3 mx-auto mt-fluid-sm px-fluid-sm container">
    {photos.map((photo: PocketBasePhotos) => (
        <div class="mb-fluid-sm break-inside-avoid">
            <Polaroid
            src={`https://fscms.nova.filipsteficar.com/api/files/photos/${photo.id}/${photo.image}?thumb=0x100`}
            srcLightbox={`https://fscms.nova.filipsteficar.com/api/files/photos/${photo.id}/${photo.image}`}
            alt={photo.alt_text || photo.quote}
            quote={photo.quote || "Quote Missing"}
            loading="lazy"
            />
        </div>
    ))}
</section>
</Layout>