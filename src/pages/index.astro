---
// Components
import Layout from "@/layouts/Layout.astro";
import Polaroid from "@/components/Polaroid.astro";
import { siteData } from "@/data/global";

// Current URL
const currentURL = Astro.url.href;
// Unsplash API
const accessKey = import.meta.env.PUBLIC_UNSPLASH_ACCESS_KEY;

const response = await fetch(
    `https://api.unsplash.com/users/filipsteficar/photos?client_id=${accessKey}&per_page=40`
);

const photos = await response.json();
console.log(photos);
// Unsplash Interface
interface UnsplashPhoto {
    urls: {
        small: string;
        regular: string;
        full: string;
        raw: string; 
    };
    location: string;
    width: number;
    height: number;
}
---
<Layout 
  pageTitle={`${siteData.name} | Home`}
  pageDescription="Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloremque blanditiis modi architecto ipsum. Distinctio, ipsam quis."
  currentURL={currentURL}
  ogImage="https://images.unsplash.com/photo-1677242178360-6518e2a87194?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
  ogImageAlt="Og Image Description"
  articleAuthor={siteData.author}
>
<section class="columns-1 md:columns-2 lg:columns-3 mx-auto mt-fluid-sm px-fluid-sm container">
    {photos.map((photo: UnsplashPhoto) => (
        <div class="mb-fluid-sm break-inside-avoid">
            <Polaroid
            src={photo.urls.small}
            srcLightbox={photo.urls.regular}
            alt={photo.location}
            width={photo.width}
            height={photo.height}
            />
        </div>
    ))}
</section>

</Layout>