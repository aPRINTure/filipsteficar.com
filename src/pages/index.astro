---
// Components
import Layout from "@/layouts/Layout.astro";
import Polaroid from "@/components/Polaroid.astro";
import Hero from "@/components/Hero.astro";
// Data
import { siteData } from "@/data/global";
// Current URL
const currentURL = Astro.url.href;
// PocketBase Interface
import type { PocketBasePhotos } from "@/types/pocketbase";
// Call PocketBase API
const response = await fetch(
    'https://fscms.nova.filipsteficar.com/api/collections/photos/records?filter=(gallery="s55mvh7k6ku1vbq")&perPage=50&sort=order'
);
const data = await response.json();
const photos: PocketBasePhotos[] = data.items;
---
<Layout 
  pageTitle={`${siteData.name} | Where Creativity Lives`}
  pageDescription="Multi-talented creative entrepreneur that loves photography, coding, music production and more!"
  currentURL={currentURL}
  ogImage="https://fscms.nova.filipsteficar.com/api/files/pbc_1063624087/c5iyxwk08jcszsd/filip_steficar_art_1_adnbf0tfww.webp"
  ogImageAlt="Portraif of Filip Štefičar"
  articleAuthor={siteData.author}
>
<section>
    <Hero />
</section>
<section>
    <div class="mx-auto mt-fluid-sm px-fluid-sm container">
        <h3>My Gallery</h3>
        <p class="w-full lg:max-w-1/2">A curated selection of my favorite shots from the past few years. Yes, I took more. No, you may not see the ones where I missed focus.</p>
    </div>
    <div class="columns-1 md:columns-2 lg:columns-3 mx-auto mt-fluid-sm px-fluid-sm container">
        {photos.map((photo: PocketBasePhotos) => (
        <div class="mb-fluid-sm break-inside-avoid">
            <Polaroid
            src={`https://fscms.nova.filipsteficar.com/api/files/photos/${photo.id}/${photo.image}?thumb=0x100`}
            srcLightbox={`https://fscms.nova.filipsteficar.com/api/files/photos/${photo.id}/${photo.image}`}
            alt={photo.alt_text || photo.quote}
            quote={photo.quote || "Quote Missing"}
            loading="lazy"
            />
        </div>
        ))}
    </div>
</section>
</Layout>